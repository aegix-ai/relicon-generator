[tool:pytest]
minversion = 6.0
addopts = 
    -ra
    --strict-markers
    --strict-config
    --tb=short
    --disable-warnings
    -p no:cacheprovider
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

markers =
    integration: Integration tests that test component interaction
    performance: Performance and benchmarking tests
    slow: Tests that take longer than 5 seconds to run
    ml: Tests that require ML libraries (scikit-learn, etc.)
    redis: Tests that require Redis server
    unit: Unit tests (default)
    smoke: Smoke tests for basic functionality
    regression: Regression tests for quality assurance
    security: Security-focused tests
    load: Load testing scenarios
    stress: Stress testing scenarios

# Test execution configuration
timeout = 300
timeout_method = thread

# Performance test configuration
performance_threshold = 5.0
memory_limit_mb = 500
min_success_rate = 0.8

# ML test configuration
ml_confidence_threshold = 0.7
quality_threshold = 0.6
neural_accuracy_threshold = 0.8

# Coverage configuration (if using pytest-cov)
[coverage:run]
source = core
omit = 
    */tests/*
    */test_*
    */__pycache__/*
    */venv/*
    */virtualenv/*

[coverage:report]
exclude_lines =
    pragma: no cover
    def __repr__
    raise AssertionError
    raise NotImplementedError
    if __name__ == .__main__.:
    if TYPE_CHECKING:

precision = 2
show_missing = True
skip_covered = False

[coverage:html]
directory = htmlcov

# Logging configuration for tests
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(name)s: %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

log_file = tests/test_execution.log
log_file_level = DEBUG
log_file_format = %(asctime)s [%(levelname)8s] %(name)s: %(message)s (%(filename)s:%(lineno)d)
log_file_date_format = %Y-%m-%d %H:%M:%S

# Test discovery patterns
collect_ignore = [
    "setup.py",
    "conftest.py"
]

# Test filtering
filterwarnings =
    ignore::UserWarning
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning